{"version":3,"file":"index.js","sources":["../src/js/components/draw-filters.js","../src/js/components/exercises-section.js","../src/js/components/active-btn.js"],"sourcesContent":["const cardList = document.querySelector('.exercises__cards');\nconst cardListEmpty = document.querySelector('.exercises__cards-empty');\n\nexport function remove_filters() {\n  cardList.innerHTML = '';\n  cardList.classList.remove('exercises__cards-wrkt');\n}\n\nexport function draw_filters(cards) {\n  cardListEmpty.classList.add('hidden');\n\n  const markup = cards\n    .map(\n      card =>\n        `<li class=\"exercises__cards-item\">\n            <a class=\"exercises__cards-link\" href=\"#\" data-name=\"${card.name}\">\n            <p class=\"exercises__cards-descr\">\n                <span class=\"exercises__cards-metadata-name\">${card.name}</span>\n                <span class=\"exercises__cards-metadata-filter\">${card.filter}</span>\n            </p>\n            <img\n                class=\"exercises__cards-image\"\n                src=\"${card.imgURL}\"\n                alt=\"${card.name}\"\n                loading=\"lazy\"\n                />\n            </a>\n        </li>\n        `\n    )\n    .join('');\n\n  cardList.innerHTML = markup;\n}\n\nexport function remove_exercies() {\n  cardList.innerHTML = '';\n  cardList.classList.remove('exercises__cards-wrkt');\n}\n\nexport function draw_exercies(keyword) {\n  cardListEmpty.classList.add('hidden');\n\n  const markup_exercies = keyword\n    .map(\n      key =>\n        `<li class=\"exercises__name\">\n       <div class=\"exercises__name-wraper-1\">\n        <span class=\"exercises__name-tag\">Workout</span>\n        <span class=\"exercises__name-rating\">${key.rating}</span>\n        <button class=\"exercises__name-btn\" type=\"button\" data-modal-open=\"\">Start</button>\n\n          <svg class=\"exercises__name-icon\" width=\"16\" height=\"16\" style=\"stroke: black;\">\n            <use href=\"./assets/icons/icons-sprite.svg#arrow\"></use>\n          </svg>\n\n\n        </div>\n\n        <div class=\"exercises__name-h3-wraper\">\n        <h3 class=\"exercises__name-h3\">${key.name}</h3>\n        <div class=\"exersize__h3-icon-wraper\">\n          <svg class=\"exersize__h3-icon\" width=\"18\" height=\"18\">\n            <use href=\"../assets/icons/icons-sprite.svg#runner\"></use>\n          </svg>\n        </div>\n        </div>\n\n        <ul class=\"exercises__name-props\" >\n            <li class=\"exercises__name-item\" >BurnedCalories:<span class=\"exercises__name-clr\">${key.burnedCalories}</span></li>\n            <li class=\"exercises__name-item\">Body part:<span class=\"exercises__name-clr\">${key.bodyPart}</span></li>\n            <li class=\"exercises__name-item\">Target:<span class=\"exercises__name-clr\">${key.target}</span></li>\n        </ul>\n        </li>\n        `\n    )\n    .join('');\n\n  if (keyword.length === 0) {\n    cardList.innerHTML = '';\n    cardListEmpty.classList.remove('hidden');\n    cardListEmpty.innerHTML = 'No exercises found';\n    return;\n  }\n\n  cardList.classList.add('exercises__cards-wrkt');\n  cardList.innerHTML = markup_exercies;\n}\n","import Pagination from 'tui-pagination';\nimport { getFilters, getExercises } from '../services/api';\nimport {\n  draw_exercies,\n  draw_filters,\n  remove_filters,\n  remove_exercies,\n} from './draw-filters';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const elements = {\n    buttonsAll: document.querySelector('.exercises__buttons'),\n    exerciseCards: document.querySelector('.exercises__cards'),\n    searchBtnClear: document.querySelector('#search-btn-clear'),\n    searchForm: document.querySelector('#search-form'),\n    searchInput: document.querySelector('#search-input'),\n    breadcrumbsTitle: document.querySelector('#exercises-breadcrumbs h2'),\n    breadcrumbsTitleDivider: document.querySelector(\n      '#exercises-breadcrumbs span'\n    ),\n    breadcrumbsSubtitle: document.querySelector('#exercises-breadcrumbs p'),\n    paginationContainer: document.querySelector('#tui-pagination-container'),\n    loader: document.querySelector('#loader'),\n  };\n\n  const filtersPerPage = 12;\n  const exercisesPerPage = window.innerWidth <= 768 ? 8 : 10;\n  const visiblePagesPagination = 10;\n  let currentPage = 1;\n  let selectedCategory = 'Muscles';\n  let selectedPart = '';\n  let paginationInstance;\n\n  const categoriesToFiltersMap = {\n    Muscles: 'muscles',\n    Equipment: 'equipment',\n    'Body parts': 'bodypart',\n  };\n\n  const removePagination = () => {\n    elements.paginationContainer.classList.add('hidden');\n    elements.paginationContainer.innerHTML = '';\n  };\n\n  const capitalizeFirstLetter = string =>\n    string.charAt(0).toUpperCase() + string.slice(1);\n\n  const debounce = (func, delay) => {\n    let timeout;\n\n    return function (...args) {\n      const context = this;\n      clearTimeout(timeout);\n      timeout = setTimeout(() => func.apply(context, args), delay);\n    };\n  };\n\n  const scrollToTop = () => {\n    window.scrollTo({\n      top: 0,\n      behavior: 'smooth',\n    });\n  };\n\n  const initializePagination = (totalPages, perPage) => {\n    if (totalPages > 1) {\n      elements.paginationContainer.classList.remove('hidden');\n\n      paginationInstance = new Pagination(elements.paginationContainer, {\n        totalItems: totalPages * perPage,\n        itemsPerPage: perPage,\n        visiblePages: visiblePagesPagination,\n        page: currentPage,\n      });\n\n      paginationInstance.on('afterMove', event => {\n        currentPage = event.page;\n        if (selectedPart) {\n          fetchAndDrawExercises({\n            [categoriesToFiltersMap[selectedCategory]]: selectedPart,\n            page: currentPage,\n            limit: exercisesPerPage,\n          });\n        } else {\n          fetchAndDrawFilters(selectedCategory);\n        }\n\n        scrollToTop();\n      });\n    } else {\n      removePagination();\n    }\n  };\n\n  const fetchAndDrawFilters = async (category = 'Muscles') => {\n    remove_filters();\n    removePagination();\n    elements.loader.classList.remove('hidden');\n\n    try {\n      const { results, totalPages } = await getFilters({\n        params: {\n          filter: category,\n          page: currentPage,\n          limit: filtersPerPage,\n        },\n      });\n\n      elements.searchForm.classList.add('hidden');\n      elements.breadcrumbsTitleDivider.classList.add('hidden');\n      elements.breadcrumbsSubtitle.classList.add('hidden');\n\n      draw_filters(results);\n      initializePagination(totalPages, filtersPerPage);\n    } catch (error) {\n      console.error('Error fetching filters:', error);\n    } finally {\n      elements.loader.classList.add('hidden');\n    }\n  };\n\n  const fetchAndDrawExercises = async params => {\n    remove_exercies();\n    removePagination();\n    elements.loader.classList.remove('hidden');\n\n    try {\n      const { results, totalPages } = await getExercises({ params });\n      draw_exercies(results);\n      initializePagination(totalPages, exercisesPerPage);\n    } catch (error) {\n      console.error('Error fetching exercises:', error);\n    } finally {\n      elements.loader.classList.add('hidden');\n    }\n  };\n\n  const onFilterButtonClick = async event => {\n    if (event.target.nodeName !== 'BUTTON') return;\n\n    selectedCategory = event.target.textContent.trim();\n\n    currentPage = 1;\n    selectedPart = '';\n\n    await fetchAndDrawFilters(selectedCategory);\n  };\n\n  const onExerciseCardClick = async event => {\n    event.preventDefault();\n    const link = event.target.closest('.exercises__cards-link');\n    if (!link) return;\n\n    selectedPart = link.getAttribute('data-name');\n    elements.breadcrumbsSubtitle.textContent =\n      capitalizeFirstLetter(selectedPart);\n\n    elements.breadcrumbsSubtitle.classList.remove('hidden');\n    elements.searchForm.classList.remove('hidden');\n    elements.breadcrumbsTitleDivider.classList.remove('hidden');\n\n    currentPage = 1;\n\n    scrollToTop();\n    await fetchAndDrawExercises({\n      [categoriesToFiltersMap[selectedCategory]]: selectedPart,\n      page: currentPage,\n      limit: exercisesPerPage,\n    });\n  };\n\n  const toggleSearchClearButton = () => {\n    if (elements.searchInput.value.trim() !== '') {\n      elements.searchBtnClear.classList.remove('hidden');\n    } else {\n      elements.searchBtnClear.classList.add('hidden');\n    }\n  };\n\n  const onSearchInput = debounce(async () => {\n    const searchValue = elements.searchInput.value;\n\n    if (searchValue.trim() !== '') {\n      elements.searchBtnClear.classList.remove('hidden');\n    } else {\n      elements.searchBtnClear.classList.add('hidden');\n    }\n\n    currentPage = 1;\n\n    await fetchAndDrawExercises({\n      [categoriesToFiltersMap[selectedCategory]]: selectedPart,\n      keyword: searchValue,\n      page: currentPage,\n      limit: exercisesPerPage,\n    });\n  }, 300);\n\n  const onClearSearchClick = () => {\n    elements.searchInput.value = '';\n    elements.searchInput.focus();\n    elements.searchBtnClear.classList.add('hidden');\n\n    currentPage = 1;\n\n    fetchAndDrawExercises({\n      [categoriesToFiltersMap[selectedCategory]]: selectedPart,\n      keyword: '',\n      page: currentPage,\n      limit: exercisesPerPage,\n    });\n  };\n\n  const onTitleClick = async () => {\n    if (!selectedPart) return;\n\n    currentPage = 1;\n    selectedPart = '';\n    await fetchAndDrawFilters(selectedCategory);\n  };\n\n  // Event listeners\n  elements.buttonsAll?.addEventListener('click', onFilterButtonClick);\n  elements.exerciseCards?.addEventListener('click', onExerciseCardClick);\n  elements.searchInput?.addEventListener('input', () => {\n    toggleSearchClearButton();\n    onSearchInput();\n  });\n  elements.searchBtnClear?.addEventListener('click', onClearSearchClick);\n  elements.breadcrumbsTitle?.addEventListener('click', onTitleClick);\n\n  // Initial load\n  fetchAndDrawFilters(selectedCategory);\n});\n","const buttons = document.querySelector('.exercises__buttons');\n\nconst onChangeActive = event => {\n  if (event.target.tagName === 'BUTTON') {\n    // Find the currently active button\n    const currentActive = document.querySelector('.exercises__btn-smpl.active');\n\n    // Remove 'active' class from the current active item and its button\n    if (currentActive) {\n      currentActive.classList.remove('active');\n    }\n\n    // Add 'active' class to the clicked button\n    const clickedButton = event.target;\n    clickedButton.classList.add('active');\n  }\n};\nif (buttons) {\n  buttons.addEventListener('click', onChangeActive);\n}\n"],"names":["cardList","cardListEmpty","remove_filters","draw_filters","cards","markup","card","remove_exercies","draw_exercies","keyword","markup_exercies","key","elements","filtersPerPage","exercisesPerPage","visiblePagesPagination","currentPage","selectedCategory","selectedPart","paginationInstance","categoriesToFiltersMap","removePagination","capitalizeFirstLetter","string","debounce","func","delay","timeout","args","context","scrollToTop","initializePagination","totalPages","perPage","Pagination","event","fetchAndDrawExercises","fetchAndDrawFilters","category","results","getFilters","error","params","getExercises","onFilterButtonClick","onExerciseCardClick","link","toggleSearchClearButton","onSearchInput","searchValue","onClearSearchClick","onTitleClick","_a","_b","_c","_d","_e","buttons","onChangeActive","currentActive"],"mappings":"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"}